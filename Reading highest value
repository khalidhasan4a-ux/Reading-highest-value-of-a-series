import java.io.File;
import java.io.PrintWriter;
import java.util.Scanner;
import java.io.FileNotFoundException;

/**
 * Reads a series of comma-separated integers from an input file,
 * finds the highest value, calculates the total sum, and writes
 * the results to an output file.
 */
public class Lab2DataProcessor {

    // --- File Names ---
    private static final String INPUT_FILE = "Input.txt";
    private static final String OUTPUT_FILE = "Output.txt";

    public static void main(String[] args) {
        
        // Variables to store the results
        int highestValue = Integer.MIN_VALUE; // Initialize to the smallest possible integer
        long totalSum = 0; // Use long for sum to prevent potential overflow

        // --- Step 1: Read from Input.txt and Process Data ---
        System.out.println("Processing data from " + INPUT_FILE + "...");
        
        // Use a try-with-resources statement to ensure the Scanner is closed
        try (Scanner fileScanner = new Scanner(new File(INPUT_FILE))) {
            
            // Assuming all data is on a single line
            if (fileScanner.hasNextLine()) {
                String line = fileScanner.nextLine();
                
                // Use a second Scanner to parse the comma-separated tokens
                // We use ',' as the delimiter and trim surrounding whitespace
                try (Scanner lineScanner = new Scanner(line).useDelimiter("\\s*,\\s*")) {
                    
                    while (lineScanner.hasNextInt()) {
                        int currentValue = lineScanner.nextInt();
                        
                        // Update highest value
                        if (currentValue > highestValue) {
                            highestValue = currentValue;
                        }
                        
                        // Update total sum
                        totalSum += currentValue;
                    }
                }
            } else {
                System.err.println("Input file is empty.");
                return;
            }
            
        } catch (FileNotFoundException e) {
            System.err.println("Error: The file " + INPUT_FILE + " was not found.");
            // e.printStackTrace(); // Uncomment for detailed error info
            return;
        }

        System.out.println("Data processing complete.");
        System.out.println("Highest Value found: " + highestValue);
        System.out.println("Total Sum of all values: " + totalSum);

        // --- Step 2: Write results to Output.txt ---
        System.out.println("\nWriting results to " + OUTPUT_FILE + "...");
        
        // Use a try-with-resources statement to ensure the PrintWriter is closed
        try (PrintWriter writer = new PrintWriter(OUTPUT_FILE)) {
            
            writer.println("--- Lab 2 Results ---");
            writer.println("Highest Value in Series: " + highestValue);
            writer.println("Total Sum of all Values: " + totalSum);
            
            System.out.println("Successfully wrote results to " + OUTPUT_FILE + ".");

        } catch (FileNotFoundException e) {
            System.err.println("Error: Could not open or create the output file " + OUTPUT_FILE);
            // e.printStackTrace();
        }
    }
}
